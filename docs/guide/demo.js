(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const v of c.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&u(v)}).observe(document,{childList:!0,subtree:!0});function o(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(s){if(s.ep)return;s.ep=!0;const c=o(s);fetch(s.href,c)}})();function rt(i){return i.replace(/([A-Z])/g,t=>`-${t[0].toLowerCase()}`)}function M(i){const t=i.tagName==="Fragment"?document.createDocumentFragment():document.createElement(i.tagName),o=i.attributes;for(const u in o)if(u.startsWith("on")){const s=u.slice(2).toLowerCase();t.addEventListener(s,o[u])}else i.tagName==="Fragment"||t.setAttribute(rt(u),o[u]);if(i.children)for(const u of i.children){if(typeof u=="string"){t.appendChild(document.createTextNode(u));continue}t.appendChild(M(u))}return t}function Lt(i,t){const o=t.el,u=t.attributes;for(const s in u)if(s.startsWith("on")){if(typeof(i==null?void 0:i.attributes[s])=="function"){const c=s.slice(2).toLowerCase();o.removeEventListener(c,i.attributes[s]),o.addEventListener(c,u[s])}}else o.setAttribute(rt(s),u[s]);for(const s of t.children){if(typeof s=="string"){o.appendChild(document.createTextNode(s));continue}o.appendChild(M(s))}if(t.children)for(const s of Object.values(t.children))I(void 0,s);return o}function I(i,t){if(t.isDeleted)return t.el.parentNode.removeChild(t.el),t;if(t.isNew)return console.log("create",t),t.el=M(t),t;if(t.isUpdated){const o=Lt(i,t);return o&&(t.el=o),t}if(t.children)for(const o of Object.values(t.children))I(void 0,o);return t}function S(i,t=["isNew"]){for(const o of t)i[o]&&(i[o]=!1);if(i.children)for(const o of Object.values(i.children))S(o,t);return i}function Rt(i,t){for(const o in t)if(o==="style")for(const u in t[o])i.style[u]=t[o][u];else i.setAttribute(o,t[o])}function nt(i,t,o,u){var s;if(t.isUpdated?(Rt(t.el,t.attributes),typeof t.children=="string"&&(t.el.textContent=t.children),(s=i.parentNode)===null||s===void 0||s.replaceChild(M(t),i)):t.isNew?i.appendChild(M(t)):t.isDeleted&&i.removeChild(i.childNodes[u]),t.children instanceof Array)for(let c=0;c<t.children.length;c++){const v=i.childNodes[c];nt(v,t.children[c],o.children[c],c)}}function $t(i,t,o){i||ot(t),t=it(i,t);const u=I(i,t);if(o){const s=[];if(o.childNodes[0].nodeName==="STYLE"&&o.childNodes.forEach(c=>{c.nodeName!=="STYLE"&&s.push(c)}),u.children instanceof Array)for(let c=0;c<u.children.length;c++)nt(s[c],u.children[c],i.children[c],c)}return S(u,["isUpdated","isNew","isDeleted"])}function ot(i){if(i.isNew)for(const t of i.children)ot(t)}function it(i,t,o){if(!i)return t;if(typeof i=="string"&&typeof t=="string"&&i!==t&&(t=t,o.isUpdated=!0),i==null?void 0:i.isDeleted)return i;if((i==null?void 0:i.tagName)!==t.tagName&&(i.isDeleted=!0,t.isNew=!0),JSON.stringify(i.attributes)!==JSON.stringify(t.attributes)&&(t.isUpdated=!0),i.children&&t.children){const u=Object.values(i.children),s=Object.values(t.children);if(JSON.stringify(u)!==JSON.stringify(s)){const c=Math.max(u.length,s.length);for(let v=0;v<c;v++)t.children[v]=it(u[v],s[v],t)}}return t}class K{constructor(t,o,u){this.tagName=t,this.attributes=o,this.children=u,this.isNew=!0,this.isUpdated=!1,this.isDeleted=!1,this.el=document.createElement(t)}static isVNode(t){return t instanceof K}}function D(i,t,...o){return new K(i,t,o)}const Dt="Fragment";var tt;(function(i){(function(t){var o=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),u=s(i);typeof o.Reflect>"u"?o.Reflect=i:u=s(o.Reflect,u),t(u);function s(c,v){return function(E,N){typeof c[E]!="function"&&Object.defineProperty(c,E,{configurable:!0,writable:!0,value:N}),v&&v(E,N)}}})(function(t){var o=Object.prototype.hasOwnProperty,u=typeof Symbol=="function",s=u&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",c=u&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",v=typeof Object.create=="function",E={__proto__:[]}instanceof Array,N=!v&&!E,x={create:v?function(){return $(Object.create(null))}:E?function(){return $({__proto__:null})}:function(){return $({})},has:N?function(e,r){return o.call(e,r)}:function(e,r){return r in e},get:N?function(e,r){return o.call(e,r)?e[r]:void 0}:function(e,r){return e[r]}},W=Object.getPrototypeOf(Function),P=typeof process=="object"&&process.env&&{}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",A=!P&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:jt(),ut=!P&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Pt(),at=!P&&typeof WeakMap=="function"?WeakMap:At(),T=new at;function ct(e,r,n,a){if(g(n)){if(!G(e))throw new TypeError;if(!H(r))throw new TypeError;return mt(e,r)}else{if(!G(e))throw new TypeError;if(!w(r))throw new TypeError;if(!w(a)&&!g(a)&&!k(a))throw new TypeError;return k(a)&&(a=void 0),n=_(n),_t(e,r,n,a)}}t("decorate",ct);function ft(e,r){function n(a,f){if(!w(a))throw new TypeError;if(!g(f)&&!Mt(f))throw new TypeError;Y(e,r,a,f)}return n}t("metadata",ft);function lt(e,r,n,a){if(!w(n))throw new TypeError;return g(a)||(a=_(a)),Y(e,r,n,a)}t("defineMetadata",lt);function ht(e,r,n){if(!w(r))throw new TypeError;return g(n)||(n=_(n)),z(e,r,n)}t("hasMetadata",ht);function pt(e,r,n){if(!w(r))throw new TypeError;return g(n)||(n=_(n)),L(e,r,n)}t("hasOwnMetadata",pt);function dt(e,r,n){if(!w(r))throw new TypeError;return g(n)||(n=_(n)),J(e,r,n)}t("getMetadata",dt);function yt(e,r,n){if(!w(r))throw new TypeError;return g(n)||(n=_(n)),q(e,r,n)}t("getOwnMetadata",yt);function vt(e,r){if(!w(e))throw new TypeError;return g(r)||(r=_(r)),V(e,r)}t("getMetadataKeys",vt);function gt(e,r){if(!w(e))throw new TypeError;return g(r)||(r=_(r)),Z(e,r)}t("getOwnMetadataKeys",gt);function wt(e,r,n){if(!w(r))throw new TypeError;g(n)||(n=_(n));var a=C(r,n,!1);if(g(a)||!a.delete(e))return!1;if(a.size>0)return!0;var f=T.get(r);return f.delete(n),f.size>0||T.delete(r),!0}t("deleteMetadata",wt);function mt(e,r){for(var n=e.length-1;n>=0;--n){var a=e[n],f=a(r);if(!g(f)&&!k(f)){if(!H(f))throw new TypeError;r=f}}return r}function _t(e,r,n,a){for(var f=e.length-1;f>=0;--f){var m=e[f],h=m(r,n,a);if(!g(h)&&!k(h)){if(!w(h))throw new TypeError;a=h}}return a}function C(e,r,n){var a=T.get(e);if(g(a)){if(!n)return;a=new A,T.set(e,a)}var f=a.get(r);if(g(f)){if(!n)return;f=new A,a.set(r,f)}return f}function z(e,r,n){var a=L(e,r,n);if(a)return!0;var f=R(r);return k(f)?!1:z(e,f,n)}function L(e,r,n){var a=C(r,n,!1);return g(a)?!1:Ot(a.has(e))}function J(e,r,n){var a=L(e,r,n);if(a)return q(e,r,n);var f=R(r);if(!k(f))return J(e,f,n)}function q(e,r,n){var a=C(r,n,!1);if(!g(a))return a.get(e)}function Y(e,r,n,a){var f=C(n,a,!0);f.set(e,r)}function V(e,r){var n=Z(e,r),a=R(e);if(a===null)return n;var f=V(a,r);if(f.length<=0)return n;if(n.length<=0)return f;for(var m=new ut,h=[],p=0,l=n;p<l.length;p++){var d=l[p],y=m.has(d);y||(m.add(d),h.push(d))}for(var b=0,X=f;b<X.length;b++){var d=X[b],y=m.has(d);y||(m.add(d),h.push(d))}return h}function Z(e,r){var n=[],a=C(e,r,!1);if(g(a))return n;for(var f=a.keys(),m=Nt(f),h=0;;){var p=Ct(m);if(!p)return n.length=h,n;var l=xt(p);try{n[h]=l}catch(d){try{Tt(m)}finally{throw d}}h++}}function B(e){if(e===null)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return e===null?1:6;default:return 6}}function g(e){return e===void 0}function k(e){return e===null}function bt(e){return typeof e=="symbol"}function w(e){return typeof e=="object"?e!==null:typeof e=="function"}function Et(e,r){switch(B(e)){case 0:return e;case 1:return e;case 2:return e;case 3:return e;case 4:return e;case 5:return e}var n=r===3?"string":r===5?"number":"default",a=Q(e,s);if(a!==void 0){var f=a.call(e,n);if(w(f))throw new TypeError;return f}return kt(e,n==="default"?"number":n)}function kt(e,r){if(r==="string"){var n=e.toString;if(O(n)){var a=n.call(e);if(!w(a))return a}var f=e.valueOf;if(O(f)){var a=f.call(e);if(!w(a))return a}}else{var f=e.valueOf;if(O(f)){var a=f.call(e);if(!w(a))return a}var m=e.toString;if(O(m)){var a=m.call(e);if(!w(a))return a}}throw new TypeError}function Ot(e){return!!e}function St(e){return""+e}function _(e){var r=Et(e,3);return bt(r)?r:St(r)}function G(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:Object.prototype.toString.call(e)==="[object Array]"}function O(e){return typeof e=="function"}function H(e){return typeof e=="function"}function Mt(e){switch(B(e)){case 3:return!0;case 4:return!0;default:return!1}}function Q(e,r){var n=e[r];if(n!=null){if(!O(n))throw new TypeError;return n}}function Nt(e){var r=Q(e,c);if(!O(r))throw new TypeError;var n=r.call(e);if(!w(n))throw new TypeError;return n}function xt(e){return e.value}function Ct(e){var r=e.next();return r.done?!1:r}function Tt(e){var r=e.return;r&&r.call(e)}function R(e){var r=Object.getPrototypeOf(e);if(typeof e!="function"||e===W||r!==W)return r;var n=e.prototype,a=n&&Object.getPrototypeOf(n);if(a==null||a===Object.prototype)return r;var f=a.constructor;return typeof f!="function"||f===e?r:f}function jt(){var e={},r=[],n=function(){function h(p,l,d){this._index=0,this._keys=p,this._values=l,this._selector=d}return h.prototype["@@iterator"]=function(){return this},h.prototype[c]=function(){return this},h.prototype.next=function(){var p=this._index;if(p>=0&&p<this._keys.length){var l=this._selector(this._keys[p],this._values[p]);return p+1>=this._keys.length?(this._index=-1,this._keys=r,this._values=r):this._index++,{value:l,done:!1}}return{value:void 0,done:!0}},h.prototype.throw=function(p){throw this._index>=0&&(this._index=-1,this._keys=r,this._values=r),p},h.prototype.return=function(p){return this._index>=0&&(this._index=-1,this._keys=r,this._values=r),{value:p,done:!0}},h}();return function(){function h(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(h.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),h.prototype.has=function(p){return this._find(p,!1)>=0},h.prototype.get=function(p){var l=this._find(p,!1);return l>=0?this._values[l]:void 0},h.prototype.set=function(p,l){var d=this._find(p,!0);return this._values[d]=l,this},h.prototype.delete=function(p){var l=this._find(p,!1);if(l>=0){for(var d=this._keys.length,y=l+1;y<d;y++)this._keys[y-1]=this._keys[y],this._values[y-1]=this._values[y];return this._keys.length--,this._values.length--,p===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},h.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},h.prototype.keys=function(){return new n(this._keys,this._values,a)},h.prototype.values=function(){return new n(this._keys,this._values,f)},h.prototype.entries=function(){return new n(this._keys,this._values,m)},h.prototype["@@iterator"]=function(){return this.entries()},h.prototype[c]=function(){return this.entries()},h.prototype._find=function(p,l){return this._cacheKey!==p&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=p)),this._cacheIndex<0&&l&&(this._cacheIndex=this._keys.length,this._keys.push(p),this._values.push(void 0)),this._cacheIndex},h}();function a(h,p){return h}function f(h,p){return p}function m(h,p){return[h,p]}}function Pt(){return function(){function e(){this._map=new A}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(r){return this._map.has(r)},e.prototype.add=function(r){return this._map.set(r,r),this},e.prototype.delete=function(r){return this._map.delete(r)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[c]=function(){return this.keys()},e}()}function At(){var e=16,r=x.create(),n=a();return function(){function l(){this._key=a()}return l.prototype.has=function(d){var y=f(d,!1);return y!==void 0?x.has(y,this._key):!1},l.prototype.get=function(d){var y=f(d,!1);return y!==void 0?x.get(y,this._key):void 0},l.prototype.set=function(d,y){var b=f(d,!0);return b[this._key]=y,this},l.prototype.delete=function(d){var y=f(d,!1);return y!==void 0?delete y[this._key]:!1},l.prototype.clear=function(){this._key=a()},l}();function a(){var l;do l="@@WeakMap@@"+p();while(x.has(r,l));return r[l]=!0,l}function f(l,d){if(!o.call(l,n)){if(!d)return;Object.defineProperty(l,n,{value:x.create()})}return l[n]}function m(l,d){for(var y=0;y<d;++y)l[y]=Math.random()*255|0;return l}function h(l){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(l)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(l)):m(new Uint8Array(l),l):m(new Array(l),l)}function p(){var l=h(e);l[6]=l[6]&79|64,l[8]=l[8]&191|128;for(var d="",y=0;y<e;++y){var b=l[y];(y===4||y===6||y===8)&&(d+="-"),b<16&&(d+="0"),d+=b.toString(16).toLowerCase()}return d}}function $(e){return e.__=void 0,delete e.__,e}})})(tt||(tt={}));function Ut(i){return console.log(i),new Proxy(i,{get(t,o){return Reflect.get(t,o)},set(t,o,u){return Reflect.set(t,o,u),!0}})}function Ft(i,t,o){const u=Ut(o);Object.defineProperty(i,t,{get(){return u.value},set(s){var c;u.value=s,this.shouldUpdate=!0,(c=this.watchersMap.get(t))===null||c===void 0||c.forEach(v=>{v.callback.call(this,s,o)}),this.updateDiff()}})}const j="jwc:component:props";function It(i,t,o){const{default:u,required:s}=o,c=Reflect.getMetadata(j,i)||[];c.push({attr:t,default:u,required:s}),Reflect.defineMetadata(j,c,i)}function Kt(i,t,o){It(i,t,o)}function et(i){const t=document.createElement("style");return t.appendChild(document.createTextNode(i)),t}const U=new WeakMap;class Wt extends HTMLElement{getMetaList(t){return Reflect.getMetadata(t,this)||new Map}initWatcher(){(this.getMetaList(j)||[]).forEach(t=>{const{callbackName:o}=t,u=this.watchersMap.get(o);u?this.watchersMap.set(o,[...u,t]):this.watchersMap.set(o,[t])})}constructor(){super(),this.rootNode=null,this.$data=null,this.$options=null,this.$deps=null,this.$lastRender=null,this.customStyles=null,this.shouldUpdate=!1,this.props={},this.propsList=[],this.previousProps={},this.previousVNode=null,this.watchersMap=new Map,this.host=this,this.$options=this.constructor.$options,this.init()}initCSS(t){if(U.has(this.constructor))t.adoptedStyleSheets=U.get(this.constructor);else{const o=this.$options.css;if(o){const u=new CSSStyleSheet;u.replaceSync(o),t.adoptedStyleSheets=[u],U.set(this.constructor,[u])}}return t}initShadowRoot(){let t=this.shadowRoot||this.attachShadow({mode:"open"});return t=this.initCSS(this.shadowRoot),this.$options.css&&t.appendChild(et(this.$options.css)),this.inlineStyles&&(this.customStyles=et(this.inlineStyles),t.appendChild(this.customStyles)),t}attrsToProps(){console.log(this.props);const t=this.shadowRoot&&this.shadowRoot.host?this.shadowRoot.host:this,o={};for(let u=0;u<t.attributes.length;u++){const s=t.attributes[u];o[s.name]=s.value}this.propsList.forEach(u=>{const{attr:s,default:c}=u;o[s]?(this.previousProps[s]=o[s],this[s]=o[s]):(this.previousProps[s]=c,this[s]=c)})}init(){this.props=this.getMetaList(j)||[],this.propsList=Object.values(this.props);const t=this;this.propsList.forEach(o=>{const{attr:u,default:s}=o;this.previousProps[u]=s,this[u]=s,Ft(t,u,o)}),this.initWatcher()}get inlineStyles(){return super.getAttribute("style")}updateDiff(){const t=this.$lastRender,o=this.render(this.$data);t&&(this.$lastRender=null,this.$lastRender=$t(S(t),S(o),this.shadowRoot))}customEvent(t,o){const u=new CustomEvent(t,{detail:o,bubbles:!0,composed:!0});this.dispatchEvent(u)}connectedCallback(){const t=this.initShadowRoot();this.attrsToProps();const o=this.props,u=this;o.forEach(c=>{const v=t.host.getAttribute(c.attr);v&&(u[c.attr]=v)});const s=this.render(this.$data);this.rootNode=M(S(s)),this.$options.isMounted&&this.rootNode&&t.appendChild(this.rootNode),this.$lastRender=S(s)}disconnectedCallback(){}attributeChangedCallback(t,o,u){o!==u&&(this.props[t]=u),this.updateDiff()}adoptedCallback(){}render(t){}}function zt(i){return(t,o)=>{Kt(t,String(o),i)}}function Jt(i){return function(t){i.isMounted===void 0&&(i.isMounted=!0),customElements.get(i.name)&&console.warn(`The component ${i.name} already exists.`),t.$options=i,customElements.define(i.name,t,i.options||{})}}const qt=`:host{max-width:1280px;margin:0 auto;padding:2rem;text-align:center}.card{padding:2em}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;background-color:#1a1a1a;cursor:pointer;transition:border-color .25s}button:hover{border-color:#646cff}button:focus,button:focus-visible{outline:4px auto -webkit-focus-ring-color}@media (prefers-color-scheme: light){button{background-color:#f9f9f9}}
`;var Yt=Object.defineProperty,Vt=Object.getOwnPropertyDescriptor,st=(i,t,o,u)=>{for(var s=u>1?void 0:u?Vt(t,o):t,c=i.length-1,v;c>=0;c--)(v=i[c])&&(s=(u?v(t,o,s):v(s))||s);return u&&s&&Yt(t,o,s),s};let F=class extends Wt{constructor(){super(),this.onClick=()=>{this.count++}}render(){return D(Dt,null,D("div",{class:"card"},D("button",{onClick:this.onClick},"count is ",String(this.count))))}};st([zt({default:0,attr:"count"})],F.prototype,"count",2);F=st([Jt({name:"jwc-element",css:qt})],F);
